var _$river={sandbox:function(){var e={};return{create:function(t,n){t=t.toLowerCase(),e[t]=n},run:function(t){var n={need:function(t){return t=t.toLowerCase(),e[t]&&e[t].call(n)||void 0}};t.call(n)}}}};_$river.module=_$river.sandbox();var define=_$river.module.create,main=_$river.module.run;define("river.engine",function(){function e(e){return i.need("river.grammer."+e)}function t(t,o){var r={hasRepeat:!1,context:void 0};o&&(r.context=o);var i={scope:{},node:t,eom:{},reg:a};return t.attributes&&t.attributes.length&&c.loop(t.attributes,function(s){var u=s.nodeName,l=s.nodeValue.replace(a,""),p=e(u);"repeat"===u&&(r.hasRepeat=!0),"scope"===u?(r.context=i,o&&(r.context.scope=c.inherit(r.context.scope,o.scope),r.context.eom=c.inherit(r.context.eom,o.eom)),p.call(r.context,l)):c.isFunction(p)&&(r.context?(r.context.node=t,p.call(r.context,l),n(s,r.context)):(r.context=i,e("scope").call(r.context,l),p.call(r.context,l)))}),r}function n(e,t){if(a.test(e.nodeValue)){var n=e.nodeValue.replace(a,"");t.eom[n]||(t.eom[n]=[]),t.eom[n].push({element:e,expression:e.nodeValue}),e.nodeValue=e.nodeValue.replace(/{{.*}}/,t.scope[n])}}function o(e,t){e.childNodes&&e.childNodes.length&&c.loop(e.childNodes,function(e){r(e,t)})}function r(e,r){var i=t(e,r);i.context&&n(e,i.context),"CODE"===e.nodeName||"PRE"===e.nodeName||i.hasRepeat||(i.context?o(e,i.context):o(e))}var i=this,c=i.need("river.core.tools"),a=/.*{{\s*|\s*}}.*/g;return{scan:r}}),main(function(){var e=this;document.addEventListener("DOMContentLoaded",function(){var t=e.need("river.engine").scan;t(document)})}),define("river.core.Date",function(){function e(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}var t=function(t){var n=new Date,o=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()+parseInt(t),n.getUTCMinutes(),n.getUTCSeconds());return{date:o,toString:function(t){return o.toString=e,o.toString(t)}}};return{getDateByCity:t}}),define("river.core.model",function(){function e(t,n,o){a(t)||s(t)?l(o[n],function(e){e.element.nodeValue=e.expression.replace(/{{.*}}/,t)}):i(t)?l(t,function(t,r){e(t,r,o[n][r])}):c(t)&&u(t,function(t,n){e(t,n,o)})}function t(e,t,n){o[e]=t,r[e]={},this.$$ns=e;for(var i in n)this[i]=n[i],last[i]=n[i]}var n=this.need("river.core.tools"),o={},r={},i=n.isArray,c=n.isObject,a=n.isString,s=n.isNumber,u=n.each,l=n.loop;return t.prototype.apply=function(){var t=o[this.$$ns],n=r[this.$$ns];u(this,function(o,r){t[r]&&n[r]!==o&&(e(o,r,t),n[r]=o)})},t.prototype.watch=function(){},t.prototype.inject=function(e){var t=this;u(e,function(n,o){t[o]=e[o]})},t}),define("river.core.tools",function(){var e=Object.prototype.toString,t={inherit:function(e,t){var n=function(){for(var t in e)e.hasOwnProperty&&e.hasOwnProperty(t)?this[t]=e[t]:n.prototype[t]=e[t]};for(var o in t)n.prototype[o]=t[o];return new n},guid:function(){for(var e="$$",t=1;8>=t;t++){var n=Math.floor(16*Math.random()).toString(16);e+=n,(3==t||5==t)&&(e+="-")}return e},loop:function(e,t){for(var n={},o=0;o<e.length;o++)t.call(n,e[o],o)},each:function(e,t){var n={};for(var o in e)e.hasOwnProperty&&e.hasOwnProperty(o)&&t.call(n,e[o],o)},log:function(){console&&Function.apply.call(console.log,console,arguments)},isArray:function(t){return"[object Array]"===e.apply(t)},isObject:function(e){return null!==e&&"object"==typeof e},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e}};return t}),define("river.grammer.jbind",function(){function e(e){var t=this.scope;this.node.value=t[e],this.node.onkeyup=function(){t[e]=this.value,t.apply()}}return e}),define("river.grammer.jChange",function(){function e(e){var t=this.scope[e],n=this.scope;this.node.onchange=function(){t.call({},this.value),n.apply()}}return e}),define("river.grammer.jclick",function(){function e(e){var t=e.replace(/\(.*\)/,""),n=this.scope[t],o=this.scope,r=/\((.*)\)/,i=e.match(r),c=[];i&&i.length&&(c=i[1].split(",")),this.node.onclick=function(){n.apply({},c),o.apply()}}return e}),define("river.grammer.jcompile",function(){return function(){}}),define("river.grammer.repeat",function(){function e(e){var n=/.*in\s/,o=/\sin.*/,r=/.*\./,i=e.replace(n,"").replace(r,""),c=this.scope[i],a=e.replace(o,""),s=this.node.parentNode,u=s.removeChild(this.node),l=document.createDocumentFragment(),p=this.reg,d=this.eom[i]=[];u.removeAttribute("repeat"),c&&c.length&&(c.forEach(function(e){var n=u.cloneNode(!0),o={};t(p,n,e,a,o),d.push(o),l.appendChild(n)}),s.appendChild(l))}function t(o,r,i,c,a){var s=!1;if(r.attributes&&r.attributes.length&&Array.prototype.forEach.call(r.attributes,function(t){if(o.test(t.nodeValue)){var u=t.nodeValue.replace(o,"").replace(c+".","");a[u]||(a[u]=[]),a[u].push({element:t,expression:t.nodeValue}),t.nodeValue=t.nodeValue.replace(/{{.*}}/,i[u])}"repeat"===t.nodeName&&(s=!0,n.node=r,n.scope=i,n.reg=o,n.eom=a,e.call(n,t.nodeValue.replace(o,"")))}),o.test(r.nodeValue)){var u=r.nodeValue.replace(o,"").replace(c+".","");a[u]||(a[u]=[]),a[u].push({element:r,expression:r.nodeValue}),r.nodeValue=r.nodeValue.replace(/{{.*}}/,i[u])}r.childNodes&&r.childNodes.length&&!s&&Array.prototype.forEach.call(r.childNodes,function(e){t(o,e,i,c,a)})}var n={};return e}),define("river.grammer.scope",function(){function e(e){var r=t.need(e);if(o.isObject(r))this.scope=r;else if(o.isFunction(r)){var i=new n(e,this.eom);this.scope=i,r.call(i)}else{var c=o.guid();this.scope=new n(c,this.eom)}}var t=this,n=t.need("river.core.model"),o=t.need("river.core.tools");return e});
//# sourceMappingURL=river.map